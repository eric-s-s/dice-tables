#:kivy 1.0.9
<DicePlatform>:
    #size_hint:None, None
    #width:100
    #height:15000

#add_new frame    
    GridLayout:
        id:add_new
        canvas.before:
            Color:
                rgba: 0,0,0,1
            Rectangle:
                pos: self.pos
                size: self.size
        cols:2
        Slider:
            id:blah
            text:'suck it'
            orientation:'vertical'
            min:1
            max:100
            value:5
            step:1
        Label:
            id:a_label
            text: str(int(blah.value))
            font_size:50
        Button:
            id:pop_upper
            text: 'pop'
            on_press: root.weight_it()
	Label:
#change_state_frame    
    BoxLayout:
        #size_hint:None, None
        #width:300
        #height:1500
        id:basic_info
        canvas:
            Color:
                rgba: 0.8,0.5,0.5,1
            Rectangle:
                pos: self.pos
                size: self.size
        cols: 3
        Button:
            id: add_random
            color:1,0,0,1
            background_color:5,5,1,5
            text: 'add stuff'
            on_press: root.do_it()
        Label:
            font_size: 70
            center_x: root.width * 3/4
            top: root.top - 50
            text:"0"
##basic_info_frame
    #basic_info_box:
    #    size_hint_x: None
    #    width: 200

#stat_graph_frame            
    BoxLayout:
        id:stat_graph_frame
        canvas.before:
            Color:
                rgba: 0.5,1,0,0.1
            Rectangle:
                pos: self.pos
                size: self.size
        orientation: 'vertical'
        padding: 10
        spacing: 10
        size_hint_x:None
        width:300
        #height:1500
        GraphBox:
            size_hint:1 , 0.18
            
                
        StatBox:
            id:the_stat_box
            size_hint: 1, 0.82
            #size_hint_y:None
            #height:500
#all_rolls_frame
    PageBox:
        id:all_rolls_frame
        size_hint_x:None
        width:200

<PageBox>:
    #size_hint_x:None
    #width:200
    #cols:1
    id:all_rolls
    orientation:'lr-tb'
    Label:
        id: page_box_title
        canvas:
            Color:
                rgba: 1,0,0,0.5
            Rectangle:
                pos: self.pos
                size: self.size
        size_hint:1, .15
        font_size: 20
        text: 'TITLE'
    Button:
        id:go_left
        size_hint: 0.25, 0.05
        text: '<==='
        on_press: root.show_page(root.current_page - 1)
    TextInput:
        id:jump_to
        size_hint: 0.25, 0.05 
        input_filter:'int'
        multiline:False
        text: str(root.current_page + 1)
        on_text_validate:root.show_page(int(jump_to.text) - 1) 
        border: 1,3,1,3
        padding_y:1,1
        font_size: (lambda:int(0.7 * self.height) if 0.7*self.height < 0.35*self.width else int(0.4 * self.width))()
    Label:
        id:page_total
        size_hint: 0.25, 0.05
        text: '/%s' % (len(root.pages))
        #font_size:int(0.7 * self.height)
        font_size: (lambda:int(0.7 * self.height) if 0.7*self.height < 0.35*self.width else int(0.4 * self.width))()
    Button:
        id:go_right
        size_hint: 0.25, 0.05
        text: '===>'
        on_press: root.show_page(root.current_page + 1)
    Label:
        canvas:
            Color:
                rgba: 0,1,0,0.5
            Rectangle:
                pos: self.pos
                size: self.size
        id:all_rolls_label
        size_hint: 1, 0.8
        #height:600
        text:''
        text_size: self.width, self.height
        
        
<GraphBox>:
    #size_hint:1 , 0.18
    #size_hint_y:None
    #height:100
    padding: 20
    spacing: 10
    Button:
        id: one_off_graph_stuff
        text: 'one-off\ngraph'
        size: self.texture_size
        on_press: root.graph_it(new=True)
    Label:
    Button:
        id: overlay_graph
        size: self.texture_size
        text: 'overlay\ngraph'
        on_press: root.graph_it()        
    Button:
        id: clear
        size: self.texture_size
        text: 'clear\noverlay'
        on_press: root.clear_graph()
        
                                
<WeightPopupContents>:
    id:weight_popup_contents
    orientation:'tb-lr'    
    Button:
        id:record
        text:'record\nweights'
        size_hint:None, None
        size: 100, 50
        on_press: app.root.record_weight() 
                  

    
    

<HorSlider>:
    BoxLayout:
        orientation:'vertical'
        size_hint_x: None
        width: 100
        Label:
            
            id:hor_title
            font_size:15
        Slider:
            #size_hint_x: None
            #width: 20
            id:hor_slider
            orientation:'horizontal'
            min:0
            max:10
            value:1
            step:1 
        Label:
            text: str(int(hor_slider.value))
            font_size:10    

<InfoBox>:
    orientation:'vertical'
    Label:
        id:stat_str
        size_hint: 1, 0.15
        text:'test'
    ScrollView:
        id:table_str_wrapper
        size_hint: 1, 0.25
        Label:
            id:dice_table_str
            text: 500*'adfgdg\n'
            size_hint: 1, None 
            text_size: self.width, None
            height: dice_table_str.texture_size[1]
    PageBox:
        id:weight_info
        size_hint: 1, 0.6
        
<StatBox>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 10
        StackLayout:
            orientation: 'lr-tb'
            size_hint: 1, 0.4
            #cols:4
            Label:
                text:'value 1'
                #size: self.texture_size
                size_hint:0.25, 0.05
            Label:
                size_hint:0.25, 0.05
            Label:
                size_hint:0.25, 0.05
                text:'value 2'
                #size: self.text
            Label:
                size_hint:0.25, 0.05
            Label:
                id:start_show
                text: str(int(start_slider.value))
                size_hint_y:0.8
                #height:200
                font_size:15
                size_hint:0.25, 0.85
            Slider:
                id:start_slider
                orientation:'vertical'
                min:0
                max:100
                value:1
                step:1
                size_hint:0.25, 0.85
                on_touch_move:root.show_stats()
                on_touch_up:root.show_stats()
            Label:
                id:stop_show
                text: str(int(stop_slider.value))
                font_size:15
                size_hint:0.25, 0.85    
            Slider:
                id:stop_slider
                orientation:'vertical'
                min:0
                max:100
                value:1
                step:1
                on_touch_move:root.show_stats()
                on_touch_up:root.show_stats()
                size_hint:0.25, 0.85
            Label:
                #size: self.texture_size
                text:'or type\nhere'
                size_hint_y: 0.15
                #size_hint_y:None
                #height:30
                size_hint:0.25, 0.1
            TextInput:
                id:start_slider_text
                input_filter:'int'
                multiline:False
                text: str(int(start_slider.value))
                on_text_validate:root.assign_text_value(box='start')
                border: 1,3,1,3
                padding_y:1,1
                font_size:int(0.7 * self.height)
                size_hint:0.25, 0.15
            Label:
                size_hint:0.25, 0.1
            TextInput:
                id:stop_slider_text
                input_filter:'int'
                multiline:False
                text: str(int(stop_slider.value))
                on_text_validate:root.assign_text_value(box='stop')            
                size_hint:0.25, 0.15
                border: 1,3,1,3
                padding_y:1,1
                font_size:int(0.7 * self.height)
                #line_height:self.font_size
        Label:
            id:stat_text
            text:'no stats'
            size: self.texture_size
            size_hint: 1, 0.6

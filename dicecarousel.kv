#:kivy 1.0.9


#tools
<HorSlider>:
    BoxLayout:
        orientation:'vertical'
        size_hint_x: None
        width: 100
        Label:
            
            id:hor_title
            font_size:15
        Slider:
            #size_hint_x: None
            #width: 20
            id:hor_slider
            orientation:'horizontal'
            min:0
            max:10
            value:1
            step:1 
        Label:
            text: str(int(hor_slider.value))
            font_size:10
<SizeButton>:
    text:'D' + str(self.die_size)

<PageBox>:
    #size_hint_x:None
    #width:200
    #cols:1
    id:all_rolls
    orientation:'vertical'
    Label:
        id: page_box_title
        canvas:
            Color:
                rgba: 1,0,0,0.5
            Rectangle:
                pos: self.pos
                size: self.size
        size_hint:1, .15
        font_size: 20
        text: 'TITLE'
        text_size:self.size
    BoxLayout:
        id:buttons_container
        orientation: 'horizontal'
        size_hint: 1, 0.05
        Button:
            id:go_left
            size_hint: 0.25, 1
            text: '<==='
            text_size:self.size
            halign: 'right'
            valign: 'middle'
            shorten:True
            shorten_from: 'right'
            max_lines: 1
            on_press: root.show_page(root.current_page - 1)
        TextInput:
            id:jump_to
            size_hint: 0.25, 1
            input_filter:'int'
            multiline:False
            #text: str(root.current_page + 1)
            on_text_validate:root.show_page(int(jump_to.text) - 1) 
            border: 1,3,1,3
            padding_y: 1,1
            font_size: (lambda:min(int(0.7 * self.height), int(0.35 * self.width)))()
        Label:
            id:page_total
            size_hint: 0.25, 1
            #text: '/%s' % (len(root.pages))
            #font_size:int(0.7 * self.height)
            font_size: (lambda:min(int(0.7 * self.height), int(0.35 * self.width)))()
        Button:
            id:go_right
            size_hint: 0.25, 1
            text: '===>'
            text_size:self.size
            halign: 'left'
            valign: 'middle'
            shorten:True
            shorten_from: 'left'
            max_lines: 1
            on_press: root.show_page(root.current_page + 1)
    Label:
        canvas:
            Color:
                rgba: 0,1,0,0.5
            Rectangle:
                pos: self.pos
                size: self.size
        id:text_container
        size_hint: 1, 0.8
        #height:600
        text:''
        text_size: self.width, self.height

<AddRmDice>:
    orientation:'horizontal'
    padding: 10
    spacing: 10

#big boxes
<ChangeBox>:
 
 
<AddBox>:
    id:bob
    orientation:'vertical'
    Label:
        id: drag
        size_hint:1, 0.05
        text: '<====DRAG====>'
        font_size: 20
        text_size: self.size
        halign: 'center'
        color: 1, 0.2,0.2,1
    
    BoxLayout:
        id: size_mod
        orientation: 'horizontal'
        size_hint: 1, 0.4
        GridLayout:
            id:presets
            rows: 2
            size_hint: 0.75, 1
        BoxLayout:
            orientation:'vertical'
            size_hint: 0.25, 1
            Label:
                text:'add a modifier'
                text_size: self.size
                size_hint: 1, 0.2
            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, 0.8
                Label:
                    id: slider_num
                    text: str(int(modifier.value))
                    size_hint: 0.25, 1
                Slider:
                    id: modifier
                    orientation: 'vertical'
                    min:-5
                    max:5
                    value:0
                    step:1
                    on_value:root.assign_mod()
                    size_hint: 0.75, 1
                    canvas: 
                        Color:
                            rgba:1,0,0,0.5
                        Rectangle:
                            size:self.size
                            pos:self.pos
    BoxLayout:
        id: add_it
        size_hint:1, 0.25     
        
        
<InfoBox>:
    orientation:'vertical'
    padding:10
    Label:
        id:stat_str
        size_hint: 1, 0.15
        text:'test'
        text_size: self.size
    ScrollView:
        id:table_str_wrapper
        size_hint: 1, 0.25
        Label:
            id:dice_table_str
            text: 500*'adfgdg\n'
            size_hint: 1, None 
            text_size: self.width, None
            height: dice_table_str.texture_size[1]
            halign: 'center'
    PageBox:
        id:weight_info
        size_hint: 1, 0.6

<GraphBox>:
    padding: 20
    spacing: 10
    Button:
        id: one_off_graph_stuff
        text: 'one - off graph'
        text_size: self.size
        size: self.texture_size
        halign: 'center'
        valign: 'middle'
        on_press: root.parent_app.request_graph(new=True)
    Label:
    Button:
        id: overlay_graph
        size: self.texture_size
        text: 'overlay\ngraph'
        on_press: root.parent_app.request_graph()        
    Button:
        id: clear
        size: self.texture_size
        text: 'clear\noverlay'
        on_press: root.parent_app.request_clear_graph()

<StatBox>:
    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            cols:4
            size_hint: 1, 0.4
            #top row - value1 value2
            Label:
                text:'value 1'
                #size: self.texture_size
                size_hint:0.25, 0.03
                #size_hint_y: 0.03
            Label:
                size_hint:0.25, 0.03
            Label:
                size_hint:0.25, 0.03
                text:'value 2'
                #size: self.text
            Label:
                size_hint:0.25, 0.03
            #2nd row slider and label
            Label:
                id:start_show
                text: str(int(start_slider.value))
                size_hint_y:0.8
                #height:200
                font_size:15
                size_hint:0.25, 0.82
                #size_hint_y: 0.82
            Slider:
                id:start_slider
                orientation:'vertical'
                min:0
                max:100
                value:1
                step:1
                size_hint:0.25, 0.82
                on_value:root.show_stats()
                #on_touch_move:root.show_stats()
                #on_touch_up:root.show_stats()
            Label:
                id:stop_show
                text: str(int(stop_slider.value))
                font_size:15
                size_hint:0.25, 0.82    
            Slider:
                id:stop_slider
                orientation:'vertical'
                min:0
                max:100
                value:1
                step:1
                on_value:root.show_stats()
                #on_touch_move:root.show_stats()
                #on_touch_up:root.show_stats()
                size_hint:0.25, 0.82
            #thrid row text input
            Label:
                #size: self.texture_size
                text:'or type\nhere'
                #size_hint_y: 0.15
                #size_hint_y:None
                #height:30
                size_hint:0.25, 0.15
            TextInput:
                id:start_slider_text
                input_filter:'int'
                multiline:False
                text: str(int(start_slider.value))
                on_text_validate:root.assign_text_value(box='start')
                border: 1,3,1,3
                padding_y:1,1
                font_size:(lambda:min(int(0.7 * self.height), int(0.3 * self.width)))()
                size_hint:0.25, 0.15
            Label:
                size_hint:0.25, 0.15
            TextInput:
                id:stop_slider_text
                input_filter:'int'
                multiline:False
                text: str(int(stop_slider.value))
                on_text_validate:root.assign_text_value(box='stop')            
                size_hint:0.25, 0.15
                border: 1,3,1,3
                padding_y:1,1
                font_size:(lambda:min(int(0.7 * self.height), int(0.3 * self.width)))()
                #line_height:self.font_size
        Label:
            id:stat_text
            text:'no stats'
            text_size:self.size
            size: self.texture_size
            size_hint: 1, 0.6
            valign:'top'
            
#<AllRollsBox>:
#    PageBox:
#        id:all_rolls
#        size_hint: 1, 1

#parent
<DicePlatform>:





#tools


    

    